function h = frame(uv)
% This is the machine-generated representation of a Handle Graphics object
% and its children.  Note that handle values may change when these objects
% are re-created. This may cause problems with any callbacks written to
% depend on the value of the handle at the time the object was saved.
%
% To reopen this object, just type the name of the M-file at the MATLAB
% prompt. The M-file and its associated MAT-file must be on your path.

load frames

time_s=[datestr(nanmean(uv.time/60/24)),uv.type'];
for i=1:size(uv.spikes)
   time_s(uv.spikes(i,2),7:8)='*';
end   
% figura
h0 = figure('Units','points', 'Color',[0.8 0.8 0.8], 'Colormap',mat0, ...
   'PointerShapeCData',mat1,'Tag','Figura','PaperPosition',[18 180 576 432], ...
	'PaperUnits','points','Position',[3 7.5 600 390], ...
	'ToolBar','none','UserData',mat1);
%
set(h0,'UserData',uv); % uv lo almazenamos en la figura

% axes
h1 = axes('Parent',h0,'Units','pixels','CameraUpVector',[0 1 0],'Color',[1 1 1], ...
	'ColorOrder',mat3,'Position',[220 100 550 375],'Tag','Axes1', ...
   'XColor',[0 0 0],'YColor',[0 0 0],'ZColor',[0 0 0],...
   'ButtonDownFcn','frames_s start' ...
    );
haxes=h1;
%xlabel
h2 = text('Parent',h1,'Color',[0 0 0],'HandleVisibility','off',...
         'HorizontalAlignment','center', ...
	      'Position',[0.4991304347826087 -0.07088607594936702 9.160254037844386], ...
      	'Tag','Axes1Text4','VerticalAlignment','cap');
set(get(h2,'Parent'),'XLabel',h2);
% ylabel       
h2 = text('Parent',h1, ...
	'Color',[0 0 0], ...
	'HandleVisibility','off', ...
	'HorizontalAlignment','center', ...
	'Position',[-0.06086956521739129 0.4962025316455697 9.160254037844386], ...
	'Rotation',90, ...
	'Tag','Axes1Text3', ...
	'VerticalAlignment','baseline');
set(get(h2,'Parent'),'YLabel',h2);

% zlabel
h2 = text('Parent',h1, ...
	'Color',[0 0 0], ...
	'HandleVisibility','off', ...
	'HorizontalAlignment','right', ...
	'Position',mat4, ...
	'Tag','Axes1Text2', ...
	'Visible','off');
set(get(h2,'Parent'),'ZLabel',h2);

% title
h2 = text('Parent',h1, ...
	'Color',[0 0 0], ...
	'HandleVisibility','off', ...
	'HorizontalAlignment','center', ...
	'Position',[0.4991304347826087 1.020253164556962 9.160254037844386], ...
	'Tag','Axes1Text1', ...
	'VerticalAlignment','bottom');
set(get(h2,'Parent'),'Title',h2);

% popup de ficheros
str=num2str(mean(uv.date'));
h1 = uicontrol('Parent',h0,'Units','points','ListboxTop',0,'Position',[16.5 165  120 21], ...
	'String',str,'Style','popupmenu','Tag','PopupMenu1','Value',1);

% list box de scanes ListScan ------> plosscan
h1 = uicontrol('Parent',h0,'Units','points','Callback','frames_s plotscan', ...
     	'BackgroundColor',[1 1 1],'Position',[12.75 240 120 123.75],'String',time_s,'Style','listbox', ...
      'Tag','ListScan', 'Value',1);
% Boton de anterior -------> prev     
h1 = uicontrol('Parent',h0,'Units','points', 'ListboxTop',0, ...
	'Position',[18 204 52.5 21], ...
	'Tag','Botprev','String','<<','Callback','frames_s prev' ...
   );
% Boton de siguiente ------->next
h1 = uicontrol('Parent',h0, 'Units','points','ListboxTop',0, ...
	'Position',[73.5 204 54.75 20.25], ...
   'Tag','Botprev','String','>>','Callback','frames_s next' ...
   );
% Text X
hTx = uicontrol('Parent',h0,'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'ListboxTop',0, ...
	'Position',[153.9310344827587 15.51724137931035 79.44827586206898 19.86206896551725], ...
   'Style','text','Tag','TextX');
% Text Y
hTy = uicontrol('Parent',h0,'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
   'ListboxTop',0, ...
   'Position',[250.1379310344828 16.13793103448276 80.0689655172414 19.86206896551725], ...
   'Style','text','Tag','TextY');
% Text Z
hTz = uicontrol('Parent',h0,'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
   'ListboxTop',0, ...
   'Position',[345.7241379310345 16.13793103448276 79.44827586206898 19.86206896551725], ...
   'Style','text','Tag','TextZ');

%  Boton ---> Del Select
h1 = uicontrol('Parent',h0,'Units','points','ListboxTop',0,'Position',[2.5 86.17241379310346 55 20], ...
   'Tag','B_del_select','String','Borrar Sel','Callback','frames_s del_select','Enable','off');
%  Boton ---> Salvar;
h1 = uicontrol('Parent',h0,'Units','points','ListboxTop',0,'Position',mat6, ...
   'Tag','B_save_mat','String','Save (mat)','Callback','frames_s save_mat','Enable','off');
%  Boton ---> Eliminar Scan
h1 = uicontrol('Parent',h0,'Units','points','ListboxTop',0,'Position',[2.5 61.17241379310345 55 20], ...
   'Tag','B_Supr_scan','String','Supr scan','Callback','frames_s supr_scan','Enable','on');
h1 = uicontrol('Parent',h0,'Units','points','ListboxTop',0,'Position',[2.5 136.1724137931035 55 20], ...
   'Tag','Pushbutton4');
h1 = uicontrol('Parent',h0,'Units','points','ListboxTop',0,'Position',[2.5 36.17241379310345 55 20], ...
	'Tag','Pushbutton5');
h1 = uicontrol('Parent',h0,'Units','points','ListboxTop',0,'Position',mat8, ...
	'Tag','Pushbutton6');
h1 = uicontrol('Parent',h0,'Units','points','ListboxTop',0,'Position',[2.5 11.17241379310345 55 20], ...
   'Tag','B_send_close','String','Send>Close','Callback','frames_s send_close','Enable','on');

% check boxes
% 3D
h1 = uicontrol('Parent',h0,'Units','points','BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
   'ListboxTop',0,'Position',[65.17241379310346 83.79310344827589 69.51724137931036 19.86206896551725], ...
   'Style','checkbox','Tag','CkPlot3D','Max',1,'Min',0,'Value',0, ...  
   'String',' 3D ','Callback','frames_s plot3D');
% Reverse X
h1 = uicontrol('Parent',h0,'Units','points','BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'ListboxTop',0,'Position',[65.17241379310346 58.96551724137932 69.51724137931036 19.86206896551725], ...
   'Style','checkbox','Tag','CkReverseX','Max',1,'Min',0,'Value',0,...
   'String',' X reverse ','Callback','frames_s xreverse');
% Log Y
h1 = uicontrol('Parent',h0,'Units','points','BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'ListboxTop',0,'Position',[65.17241379310346 33.51724137931035 69.51724137931036 20.48275862068966], ...
   'Style','checkbox','Tag','CkLog','Max',1,'Min',0,'Value',0,...
   'String',' Log Axis ','Callback','frames_s log');

% Select

h1 = uicontrol('Parent',h0,'Units','points','BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
   'ListboxTop',0, 'Position',mat7,'Style','checkbox','Tag','CkSelect','Max',1,'Min',0,'Value',0,...
   'String',' Select ','Callback','frames_s select');


h1 = uicontrol('Parent',h0,'Units','points','BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'ListboxTop',0,'Position',[65.17241379310346 134.0689655172414 69.51724137931036 19.86206896551725], ...
   'Style','checkbox','Tag','Checkbox4',...
   'CreateFcn','frames_s plot_scan'...
);



set(hTx,'Userdata',[hTx,hTy,hTz]); % handles a los textos

if nargout > 0, h=h0; end
