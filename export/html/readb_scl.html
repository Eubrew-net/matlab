
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      -->
      <title>readb_scl</title>
      <meta name="generator" content="MATLAB 7.8">
      <meta name="date" content="2009-04-17">
      <meta name="m-file" content="readb_scl"><style type="text/css">

body {
  background-color: white;
  margin:10px;
}

h1 {
  color: #990000; 
  font-size: x-large;
}

h2 {
  color: #990000;
  font-size: medium;
}

/* Make the text shrink to fit narrow windows, but not stretch too far in 
wide windows. */ 
p,h1,h2,div.content div {
  max-width: 600px;
  /* Hack for IE6 */
  width: auto !important; width: 600px;
}

pre.codeinput {
  background: #EEEEEE;
  padding: 10px;
}
@media print {
  pre.codeinput {word-wrap:break-word; width:100%;}
} 

span.keyword {color: #0000FF}
span.comment {color: #228B22}
span.string {color: #A020F0}
span.untermstring {color: #B20000}
span.syscmd {color: #B28C00}

pre.codeoutput {
  color: #666666;
  padding: 10px;
}

pre.error {
  color: red;
}

p.footer {
  text-align: right;
  font-size: xx-small;
  font-weight: lighter;
  font-style: italic;
  color: gray;
}

  </style></head>
   <body>
      <div class="content"><pre class="codeinput"><span class="keyword">function</span> [sc_avg,sc_raw]=readb_scl(path,config,plot)

sc_avg=[];
sc_raw=[];
s=dir(path);
[p,n,e]=fileparts(path);
[pc,nc,ec]=fileparts(config);
hf=[];
<span class="keyword">for</span> i=1: length(s)
    scraw=[];
    scavg=[];
    <span class="keyword">try</span>
        <span class="keyword">if</span> nargin==1
            [scavg,scraw]=readb_sc(fullfile(p,s(i).name));
        <span class="keyword">else</span>
            file=fullfile(p,s(i).name);
            [scavg,scraw]=readb_sc(file,config);
        <span class="keyword">end</span>
        sc_avg=[sc_avg;scavg];
        sc_raw=[sc_raw;scraw];

<span class="comment">%         if ~isempty(scraw )</span>
<span class="comment">%             medida=fix(scraw(:,2)/100);</span>
<span class="comment">%             for ii=1:size(scavg,1),</span>
<span class="comment">%                 h=figure;</span>
<span class="comment">%                 hf=[hf,h];</span>
<span class="comment">%                 sc_=scraw(medida==ii,:);</span>
<span class="comment">%                 sca=scavg(ii,:);</span>
<span class="comment">%                 %subplot(3,2,mod(i,6)+1);</span>
<span class="comment">%                 polyplot2(sc_(:,3),sc_(:,18));</span>
<span class="comment">%                 % polyplot2(sc_(:,3),sc_(:,18).*sc_(:,8));</span>
<span class="comment">%</span>
<span class="comment">%                 title({' ',' ',...</span>
<span class="comment">%                     sprintf(' airm=%.2f  filter=%d ozone=%.1f  step=%.0f \\Delta hg step=%.1f ',sca(1,[8,9,11,10,21])),...</span>
<span class="comment">%                     ['y=',poly2str(round(sca(18:20)*100)/100),'',sprintf(' normr=%.1f',sca(1,17))]});</span>
<span class="comment">%                 suptitle([ s(i).name,'  ',datestr(sca(1,1))]);</span>
<span class="comment">%                 xlabel('step');</span>
<span class="comment">%                 ylabel('ozone');</span>
<span class="comment">%             end</span>
<span class="comment">%         end</span>

    <span class="keyword">catch</span>
        <span class="comment">%rethrow(lasterror);</span>
        warning(<span class="string">'MATLAB:readbsl:file_error'</span>, <span class="string">' %s.'</span>, s(i).name);
        <span class="comment">%sx=lasterror;</span>
        <span class="comment">%disp(sx.message);</span>

    <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="comment">%</span>
<span class="comment">% for i=hf</span>
<span class="comment">%     h=figure(i);</span>
<span class="comment">%     save2word('sc_report_plot.doc');</span>
<span class="comment">%     close(h);</span>
<span class="comment">% end</span>
<span class="comment">%</span>

<span class="comment">%                % 7    8        9        10      11         12        13      14</span>
<span class="comment">%             o3.sc_avg_legend={ 'time_start' 'time_end' 'idx' 'st0'  'stend'  'inc'...</span>
<span class="comment">%                 'temp' 'airm'  'filt'  'o3step'  'o3max'  'so2step'  'so2max' 'calc_step'...</span>
<span class="comment">%                 'o3stepc' 'o3max' 'normr' 'a'  'b'  'c' 'hg_chg' 'hg_start' 'hg_end'};</span>
<span class="comment">%                  % 15          16    17     18   19   20    21         22       23</span>
<span class="comment">%             o3.sc_raw=sc_raw;</span>
<span class="comment">%             o3.sc_raw_legend={'date';'flg';'idx';'tmp';'fl1';'fl2';'tim';...</span>
<span class="comment">%                 'm2 ';'m3*pressure corr';'cy ';'F0 ';'F1 ';'F2 ';'F3 ';...</span>
<span class="comment">%                 'F4 ';'F5 ';'F6 ';'o3 ';'so2 ';'o3c ';'so2c '};</span>
</pre><pre class="codeoutput">Input argument "path" is undefined.

Error in ==&gt; readb_scl at 5
s=dir(path);
</pre><p class="footer"><br>
            Published with MATLAB&reg; 7.8<br></p>
      </div>
      <!--
##### SOURCE BEGIN #####
function [sc_avg,sc_raw]=readb_scl(path,config,plot)

sc_avg=[];
sc_raw=[];
s=dir(path);
[p,n,e]=fileparts(path);
[pc,nc,ec]=fileparts(config);
hf=[];
for i=1: length(s)
    scraw=[];
    scavg=[];
    try
        if nargin==1
            [scavg,scraw]=readb_sc(fullfile(p,s(i).name));
        else
            file=fullfile(p,s(i).name);
            [scavg,scraw]=readb_sc(file,config);
        end
        sc_avg=[sc_avg;scavg];
        sc_raw=[sc_raw;scraw];

%         if ~isempty(scraw )
%             medida=fix(scraw(:,2)/100);
%             for ii=1:size(scavg,1),
%                 h=figure;
%                 hf=[hf,h];
%                 sc_=scraw(medida==ii,:);
%                 sca=scavg(ii,:);
%                 %subplot(3,2,mod(i,6)+1);
%                 polyplot2(sc_(:,3),sc_(:,18));
%                 % polyplot2(sc_(:,3),sc_(:,18).*sc_(:,8));
% 
%                 title({' ',' ',...
%                     sprintf(' airm=%.2f  filter=%d ozone=%.1f  step=%.0f \\Delta hg step=%.1f ',sca(1,[8,9,11,10,21])),...
%                     ['y=',poly2str(round(sca(18:20)*100)/100),'',sprintf(' normr=%.1f',sca(1,17))]});
%                 suptitle([ s(i).name,'  ',datestr(sca(1,1))]);
%                 xlabel('step');
%                 ylabel('ozone');
%             end
%         end

    catch
        %rethrow(lasterror);
        warning('MATLAB:readbsl:file_error', ' %s.', s(i).name);
        %sx=lasterror;
        %disp(sx.message);
        
    end
end

% 
% for i=hf
%     h=figure(i);
%     save2word('sc_report_plot.doc');
%     close(h);
% end
% 

%                % 7    8        9        10      11         12        13      14
%             o3.sc_avg_legend={ 'time_start' 'time_end' 'idx' 'st0'  'stend'  'inc'...
%                 'temp' 'airm'  'filt'  'o3step'  'o3max'  'so2step'  'so2max' 'calc_step'...
%                 'o3stepc' 'o3max' 'normr' 'a'  'b'  'c' 'hg_chg' 'hg_start' 'hg_end'};
%                  % 15          16    17     18   19   20    21         22       23
%             o3.sc_raw=sc_raw;
%             o3.sc_raw_legend={'date';'flg';'idx';'tmp';'fl1';'fl2';'tim';...
%                 'm2 ';'m3*pressure corr';'cy ';'F0 ';'F1 ';'F2 ';'F3 ';...
%                 'F4 ';'F5 ';'F6 ';'o3 ';'so2 ';'o3c ';'so2c '};

##### SOURCE END #####
-->
   </body>
</html>